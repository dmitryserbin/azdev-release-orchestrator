parameters:
  name: ""
  testResults: "**/results.xml"

steps:
- task: Npm@1
  displayName: Restore packages
  inputs:
    workingDir: ${{ parameters.name }}

- task: Npm@1
  displayName: Run build
  inputs:
    command: custom
    workingDir: ${{ parameters.name }}
    customCommand: run build

- task: Npm@1
  displayName: Run tests
  inputs:
    command: custom
    workingDir: ${{ parameters.name }}
    customCommand: run test

- task: Npm@1
  displayName: Run clean
  inputs:
    command: custom
    workingDir: ${{ parameters.name }}
    customCommand: run clean

- task: PublishTestResults@2
  displayName: Publish test results
  inputs:
    testResultsFiles: ${{ parameters.testResults }}

- publish: ${{ parameters.name }}
  displayName: Publish task
  artifact: ${{ parameters.name }}
